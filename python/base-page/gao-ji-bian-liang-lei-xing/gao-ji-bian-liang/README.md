# 高级变量

## 目标

* 列表
* 元组
* 字典
* 字符串
* 公共方法
* 变量高级

## 知识点回顾

### 数据类型

数字型和非数字型

#### 数字型

| 类型  | 描述      |
| --- | ------- |
| 整型  | int     |
| 浮点型 | float   |
| 布尔型 | bool    |
| 复合型 | complex |

#### 非数字型

| 类型  | 描述 |
| --- | -- |
| 字符串 |    |
| 列表  |    |
| 元组  |    |
| 字典  |    |

所有非数字型变量都支持一下特点

* 都是一个序列 `sequence` 也可以理解为容器
* 取值`[ ]`
* 遍历 `for in`
* 计算长度、最大/最小值、比较、删除
* 链接 `+` 和重复 `*`&#x20;
* 切片

##

##

## 3 字典

### 3.1 字典的定义

字典是 无序的 对象集合\
列表是 有序的 对象集合

字典用`{}` 定义

字典使用 `键值对` 存储数据，键值对之间用 `,` 分隔

* 键 `key` 是索引
* 值 `value` 是数据
* 键和值 之间使用`:` 分隔
* 键必须是唯一的
* 值可以取任何数据类型，键只能使用字符串、数字、元组

```python
# 定义字典
xiaoming = {"name":"小明",
            "age":18,
            "gender":True,
            "height":1.75}
print(xiaoming)
```

### 3.2.1 字典基本使用

```python
xiaoming_dict = {"name":"小明"}

# 1. 取值
print(xiaoming_dict["name"])

# 2. 增加/修改
# 如果key不存在，会新增键值对
xiaoming_dict["age"] = 18
# 如果key存在，会修改已经存在的键值对
xiaoming_dict["name"] = "小小明"

# 3. 删除
xiaoming_dict.pop("name")

print(xiaoming_dict)
```

### 3.2.2 字典常用操作

|         |      |
| ------- | ---- |
| update  | 合并字典 |

```python
xiaoming_dict = {"name":"小明",
                 "age":18}
# 1. 统计键值对的数量
print(len(xiaoming_dict))

# 2. 合并字典
temp_dict = {"height":1.75}
# 注意：如果被合并的字典中包含已经存在的键值对，会覆盖原有的键值对
xiaoming_dict.update(temp_dict)

# 3. 清空字典
xiaoming_dict.clear()
```

### 3.3 字典循环遍历

```python
# 字典的遍历 
xiaoming_dict = {"name": "xiaoming",
                 "qq":"1234",
                 "phone":"1000"}

# 变量K是 每次循环中，获取到的键值对的key

for k in xiaoming_dict:
    print("%s : %s" %(k,xiaoming_dict[k]))
    
```

### 3.4 应用场景

使用多个键值对，存储描述一个 物体 的相关信息 -- 描述更复杂的数据信息

将 多个字典 放在 一个列表 中，再进行遍历，在循环体内部针对每一个字典进行 相同的处理

可以将 多个 字典 存放在一个 列表 中

```python
card_list = [{"name": "xiaoming",
                 "qq":"1234",
                 "phone":"1000"},
            {
                "name":"lisi",
                "qq":"54321",
                "phone":"1111"}
            ]

for card_info in card_list:
    print(card_info)

# 需要注意的是，字典是无序的对象集合，输出可能顺序不一样
# 但是列表是有序的对象集合
```

## 4 字符串

### 4.1 字符串的定义

字符串就是一串字符，表示文本的数据类型

格式： 使用 一对双引号 `" "` 或者 一对单引号 `' '` 定义一个字符串

> 如果字符串内部需要使用`"` ，可以使用`'` 定义字符串\
> 如果字符串内部需要使用`'` ，可以使用`"` 定义字符串

可以使用 索引 获取一个字符串中 指定位置的字符，索引计数从 0 开始

也可以使用 `for` 循环遍历字符串中每一个字符

```python
string = "hello"
for c in string:
    print(c)


str1 = "hello python"
str2 = "我是大西瓜"

for char in str2:
    print(char)
```

`len(字符串)` 获取字符串的长度\
`字符串.count(字符串)` 获取 小字符串 是第一次出现的索引

> \t 水平制表符相当于TAB\
> \n 换行\
> \r 回车

### 4.2 字符串常用操作

index方法：某一个子字符串出现的位置； 如果使用此方法传递的子字符串不存在，会报错。

#### 4.2.1 判断类型

| 方法               | 说明                                   |
| ---------------- | ------------------------------------ |
| string.isspace() | 只包含空格，返回true，还可以看空白字符                |
| isalnum          | 如果至少有一个字符并且所有字符都是字母或者数字则返回True       |
| isalpha          | 如果至少有一个字符并且所有字符都是字母则返回True           |
| isdecimal        | 只有数字返回T                              |
| islower          | 至少一个区分大小写的字符，并且所有这些（区分大小写）字符都是小写，返回T |
| isupper          | 至少一个区分大小写的字符，并且所有这些（区分大小写）字符都是大写，返回T |

#### 4.2.2 查找与替换

|                                                  |                                                                         |
| ------------------------------------------------ | ----------------------------------------------------------------------- |
| startswith(str)                                  | 检查字符串是否以str开头                                                           |
| endswith(str)                                    | 检查字符串是否以str结束                                                           |
| find(str,start=0,end=len(string))                | 检测str是否包含在stringz h哦那个，如果start和end指定范围，则检查是否包含在指定范围，如果是就返回索引值。          |
| replace(old\_str,new\_str,num=string.count(old)) | <p>把string 中的old_str替换成new_str，如果num指定，则替换不超过num次<br>（不会修改原有字符串的内容）</p> |

#### 4.2.3 大小写转换

| string.capitalize() | 把字符串的第一个字符大写         |
| ------------------- | -------------------- |
| string.title()      | 把字符串的每个单词首字母大写       |
| string.lower()      | 转换 string 中所有大写字符为小写 |
| string.upper()      | 转换 string 中的小写字母为大写  |
| string.swapcase()   | 翻转 string 中的大小写      |

#### 4.2.4 文本对齐

| string.ljust(width)  | 返回一个原字符串左对齐，并使用空格填充至长度 width 的新字符串 |
| -------------------- | ---------------------------------- |
| string.rjust(width)  | 返回一个原字符串右对齐，并使用空格填充至长度 width 的新字符串 |
| string.center(width) | 返回一个原字符串居中，并使用空格填充至长度 width 的新字符串  |

#### 4.2.5 去除空白字符

| string.lstrip() | 截掉 string 左边（开始）的空白字符 |
| --------------- | --------------------- |
| string.rstrip() | 截掉 string 右边（末尾）的空白字符 |
| string.strip()  | 截掉 string 左右两边的空白字符   |

#### 4.2.6 拆分和连接

| string.partition(str)     | 把字符串 string 分成一个 3 元素的元组 (str前面, str, str后面)                                     |
| ------------------------- | -------------------------------------------------------------------------------- |
| string.rpartition(str)    | 类似于 partition() 方法，不过是从右边开始查找                                                    |
| string.split(str="", num) | 以 str 为分隔符拆分 string，如果 num 有指定值，则仅分隔 num + 1 个子字符串，str 默认包含 '\r', '\t', '\n' 和空格 |
| string.splitlines()       | 按照行('\r', '\n', '\r\n')分隔，返回一个包含各行作为元素的列表                                        |
| string.join(seq)          | 以 string 作为分隔符，将 seq 中所有的元素（的字符串表示）合并为一个新的字符串                                    |

```python
# 假设：以下内容是从网络上抓取的
# 要求：
# 1. 将字符串中的空白字符全部去掉
# 2. 再使用 " " 作为分隔符，拼接成一个整齐的字符串
poem_str = "登鹳雀楼\t 王之涣 \t 白日依山尽 \t \n 黄河入海流 \t\t 欲穷千里目 \t\t\n更上一层楼"

print(poem_str)

# 1. 拆分字符串
poem_list = poem_str.split()
print(poem_list)

# 2. 合并字符串
result = " ".join(poem_list)
print(result)

```

### 4.3 字符串的切片

* **切片** 方法适用于 **字符串**、**列表**、**元组**
  * **切片** 使用 **索引值** 来限定范围，从一个大的 **字符串** 中 **切出** 小的 **字符串**
  * **列表** 和 **元组** 都是 **有序** 的集合，都能够 **通过索引值** 获取到对应的数据
  * **字典** 是一个 **无序** 的集合，是使用 **键值对** 保存数据

```python
字符串[开始索引:结束索引:步长]
```

**注意**：

1. 指定的区间属于 **左闭右开** 型 `[开始索引, 结束索引)` => `开始索引 >= 范围 < 结束索引`
   * 从 `起始` 位开始，到 **`结束`位的前一位** 结束（**不包含结束位本身**)
2. 从头开始，**开始索引** **数字可以省略，冒号不能省略**
3. 到末尾结束，**结束索引** **数字可以省略，冒号不能省略**
4. 步长默认为 `1`，如果连续切片，**数字和冒号都可以省略**
   1. 如果想切片最后一位，则在结束索引空着就能切片刀最后一位\
      如果只想拿最后一位，直接用倒序 \[-1]

顺序是从0开始递增，倒序是从-1（从右向左）开始递减。

```python
#练习

num_str = "0123456789"
num_str[2:6]  # 输出 2345
num_str[2:]  # 输出 23456789
num_str[0:6]  # 输出 012345
num_str[-1]  # 输出 9
num_str[2:-1]  # 输出 2345678
num_str[-2:]  # 输出 89
num_str[-1::-1]  # 输出 9876543210
 
```

## 5 公共方法

### 5.1 python内置函数

| len(item)         | 计算容器中元素个数             |                       |
| ----------------- | --------------------- | --------------------- |
| del(item)         | 删除变量                  | del 有两种方式             |
| max(item)         | 返回容器中元素最大值            | 如果是字典，只针对 key 比较      |
| min(item)         | 返回容器中元素最小值            | 如果是字典，只针对 key 比较      |
| cmp(item1, item2) | 比较两个值，-1 小于/0 相等/1 大于 | Python 3.x 取消了 cmp 函数 |

> 字符串 比较符合以下规则： "0" < "A" < "a"

### 5.2 切片

<table><thead><tr><th width="121">描述</th><th>python表达式</th><th>结果</th></tr></thead><tbody><tr><td>切片</td><td>"0123456789"[::-2]</td><td>"97531"</td></tr></tbody></table>

* **切片** 使用 **索引值** 来限定范围，从一个大的 **字符串** 中 **切出** 小的 **字符串**
* **列表** 和 **元组** 都是 **有序** 的集合，都能够 **通过索引值** 获取到对应的数据
* **字典** 是一个 **无序** 的集合，是使用 **键值对** 保存数据

### 5.3 运算符

| +            | \[1, 2] + \[3, 4]     | \[1, 2, 3, 4]                 | 合并      | 字符串、列表、元组    |
| ------------ | --------------------- | ----------------------------- | ------- | ------------ |
| \*           | \["Hi!"] \* 4         | \['Hi!', 'Hi!', 'Hi!', 'Hi!'] | 重复      | 字符串、列表、元组    |
| in           | 3 in (1, 2, 3)        | True                          | 元素是否存在  | 字符串、列表、元组、字典 |
| not in       | 4 not in (1, 2, 3)    | True                          | 元素是否不存在 | 字符串、列表、元组、字典 |
| >,>=,==,<,<= | (1, 2, 3) < (2, 2, 3) | True                          | 元素比较    | 字符串、列表、元组    |

> \+号操作会产生新一个列表，\
> 但是extend操作是调用方法将原来的列表进行修改\
> append 可以在后面追加新的列表

```python
[1,2] + [3,4]
#out [1,2,3,4]

t_list = [1,2]
t_list.extend([3,4])
# out [1,2,3,4]

t_list.append(0)
#out [1,2,3,4,0]

t_list.append([8,9])
#out [1,2,3,4,0[8,9]]

```

#### 成员运算符

成员运算符用于 测试 序列中是否包含制定的 成员

`in` 在对字典操作时，判断的是 `字典的键` \
`in` 和 `not in` 被称为成员运算符

<table data-header-hidden><thead><tr><th width="109">运算符</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td>in</td><td>如果在指定的序列中找到值返回 True，否则返回 False</td><td><code>3 in (1, 2, 3)</code> 返回 <code>True</code></td></tr><tr><td>not in</td><td>如果在指定的序列中没有找到值返回 True，否则返回 False</td><td><code>3 not in (1, 2, 3)</code> 返回 <code>False</code></td></tr></tbody></table>

注意：在对 字典 操作时，判断的是 字典的键

## 5.4 完整的for循环语法

```python
for 变量 in 集合：
    循环体代码
else:
    没有通过break 推出循环，循环结束后，会执行的代码 
```

```python
for num in [1, 2, 3]:

    print(num)

    if num == 2:
        break
else:
    # 如果循环体内部使用break退出了循环
    # else 下方的代码就不会被执行
    print("会执行吗？")

print("循环结束")
```

### 5.4.1 应用场景

* 在 **迭代遍历** 嵌套的数据类型时，例如 **一个列表包含了多个字典**
* 需求：要判断 某一个字典中 是否存在 指定的 值
  * 如果 **存在**，提示并且退出循环
  * 如果 **不存在**，在 **循环整体结束** 后，希望 **得到一个统一的提示**

```python
students = [
    {"name": "阿土",
     "age": 20,
     "gender": True,
     "height": 1.7,
     "weight": 75.0},
    {"name": "小美",
     "age": 19,
     "gender": False,
     "height": 1.6,
     "weight": 45.0},
]
# 在学院列表中搜索指定姓名
find_name = "阿土"

for stu_dict in students:

    print(stu_dict)

    # 判断当前遍历的字典中姓名是否为find_name
    if stu_dict["name"] == find_name:
        print("找到了")

        # 如果已经找到，直接退出循环，就不需要再对后续的数据进行比较
        break

else:
    # 如果希望在搜索列表时，所有的字典检查之后，都没有发现需要搜索的目标
    # 还希望得到一个统一的提示！ 可以用for else这种格式
    print("没有找到 %s" % find_name)

print("循环结束")
```

### 6 名片管理系统

{% content-ref url="../ming-pian-guan-li-xi-tong.md" %}
[ming-pian-guan-li-xi-tong.md](../ming-pian-guan-li-xi-tong.md)
{% endcontent-ref %}

### 7 LINUX上的Shebang符号(#!)

`#!` 叫做 `shebang` 通常在 `unix` 系统脚本中 第一行开始使用， 指明 执行这个脚本文件的解释程序

#### 7.1 使用Shebang的步骤

1. 使用 `which` 查询 `python3` 解释器所在路径

```
$ which python3
```

2. 修改要运行的 **主 python 文件**，在第一行增加以下内容

```
#! /usr/bin/python3
```

3. 修改 **主 python 文件** 的文件权限，增加执行权限

```
$ chmod +x cards_main.py
```

4. 在需要时执行程序即可

```
./cards_main.py
```
